webpackJsonp([4],{0:function(e,t,n){e.exports=n(794)},393:function(e,t,n){var a,l;(function(e){!function(){var t=n(13),a=n(14),l=n(4),s=n(1);e.makeHot=e.hot.data?e.hot.data.makeHot:t(function(){return a.getRootInstances(l)},s)}();try{(function(){a=[t,e,n(1),n(12),n(2),n(67),n(82),n(83),n(11)],l=function(e,t,n,a,l,s,r,o,i){"use strict";var c=a.default,m=c(n),d=c(l),u=(s.CFsListRender,c(r)),p=(c(o),c(i)),h=m.createClass({displayName:"SegmentList",propTypes:{repairRunId:m.PropTypes.string.isRequired},getInitialState:function(){var e=window!=window.top,t=e?"http://127.0.0.1:8080":"";return{segments:[],repairRunId:this.props.repairRunId,scheduler:{},urlPrefix:t,runningCollapsed:!1,doneCollapsed:!1,notStartedCollapsed:!1}},componentWillMount:function(){this._refreshSegments(),this.setState({scheduler:setInterval(this._refreshSegments,3e4)})},componentWillUnmount:function(){clearInterval(this.state.scheduler)},_refreshSegments:function(){p.ajax({url:this.state.urlPrefix+"/repair_run/"+encodeURIComponent(this.state.repairRunId)+"/segments",method:"GET",component:this,complete:function(e){this.component.setState({segments:p.parseJSON(e.responseText)})}})},_toggleRunningDisplay:function(){1==this.state.runningCollapsed?this.setState({runningCollapsed:!1}):this.setState({runningCollapsed:!0})},_toggleDoneDisplay:function(){1==this.state.doneCollapsed?this.setState({doneCollapsed:!1}):this.setState({doneCollapsed:!0})},_toggleNotStartedDisplay:function(){1==this.state.notStartedCollapsed?this.setState({notStartedCollapsed:!1}):this.setState({notStartedCollapsed:!0})},render:function(){function e(e,t){var n=0;return e.startTime>t.startTime?n=1:e.startTime<t.startTime&&(n=-1),n*-1}function t(e,t){var n=0;return e.endTime>t.endTime?n=1:e.endTime<t.endTime&&(n=-1),n*-1}function n(e,t){var n=0;return e.tokenRange.start>t.tokenRange.start?n=1:e.tokenRange.start<t.tokenRange.start&&(n=-1),n}var a=this,l=this.state.segments.filter(function(e){return"RUNNING"==e.state});l.sort(e);var s=l.map(function(e){return m.createElement("tbody",{key:e.id+"-rows"},m.createElement(g,{segment:e,key:e.id+"-head",urlPrefix:a.state.urlPrefix,refreshSegments:a._refreshSegments}))}),r=this.state.segments.filter(function(e){return"NOT_STARTED"==e.state}).sort(n).map(function(e){return m.createElement("tbody",{key:e.id+"-rows"},m.createElement(g,{segment:e,key:e.id+"-head"}))}),o=this.state.segments.filter(function(e){return"DONE"==e.state}),i=o.sort(t).map(function(e){return m.createElement("tbody",{key:e.id+"-rows"},m.createElement(g,{segment:e,key:e.id+"-head",urlPrefix:a.state.urlPrefix,refreshSegments:a._refreshSegments}))}),c=null;c=0==s.length?m.createElement("div",{className:"alert alert-info",role:"alert"},"No running segments found"):m.createElement("div",{className:"row"},m.createElement("div",{className:"col-sm-12"},m.createElement("div",{className:"table-responsive"},m.createElement("table",{className:"table table-bordered table-hover table-striped"},m.createElement("thead",null,m.createElement("tr",null,m.createElement("th",null,"ID"),m.createElement("th",null,"Start token"),m.createElement("th",null,"End token"),m.createElement("th",null,"Fail count"),m.createElement("th",null,"State"),m.createElement("th",null,"Host"),m.createElement("th",null,"Started"),m.createElement("th",null))),s))));var d=null;d=0==i.length?m.createElement("div",{className:"alert alert-info",role:"alert"},"No segment done yet"):m.createElement("div",{className:"row"},m.createElement("div",{className:"col-sm-12"},m.createElement("div",{className:"table-responsive"},m.createElement("table",{className:"table table-bordered table-hover table-striped"},m.createElement("thead",null,m.createElement("tr",null,m.createElement("th",null,"ID"),m.createElement("th",null,"Start token"),m.createElement("th",null,"End token"),m.createElement("th",null,"Fail count"),m.createElement("th",null,"State"),m.createElement("th",null,"Host"),m.createElement("th",null,"Started"),m.createElement("th",null,"Ended"),m.createElement("th",null,"Duration"),m.createElement("th",null))),i))));var u=null;u=0==r.length?m.createElement("div",{className:"alert alert-info",role:"alert"},"No more segment to process"):m.createElement("div",{className:"row"},m.createElement("div",{className:"col-sm-12"},m.createElement("div",{className:"table-responsive"},m.createElement("table",{className:"table table-bordered table-hover table-striped"},m.createElement("thead",null,m.createElement("tr",null,m.createElement("th",null,"ID"),m.createElement("th",null,"Start token"),m.createElement("th",null,"End token"),m.createElement("th",null,"Fail count"),m.createElement("th",null,"State"))),r))));var p={display:"none"},h={display:"inline-block"};1==this.state.runningCollapsed&&(p={display:"inline-block"},h={display:"none"});var E={display:"inline-block"},f={display:"none"};1==this.state.doneCollapsed&&(E={display:"none"},f={display:"inline-block"});var y={display:"none"},v={display:"inline-block"};1==this.state.notStartedCollapsed&&(y={display:"inline-block"},v={display:"none"});var N=m.createElement("div",{className:"panel-title"},m.createElement("a",{href:"#segments-running","data-toggle":"collapse",onClick:this._toggleRunningDisplay},"Running (",this.state.segments.filter(function(e){return"RUNNING"==e.state}).length,")"),"  ",m.createElement("span",{className:"glyphicon glyphicon-menu-down","aria-hidden":"true",style:p}),m.createElement("span",{className:"glyphicon glyphicon-menu-up","aria-hidden":"true",style:h})),b=m.createElement("div",{className:"panel-title"},m.createElement("a",{href:"#segments-done","data-toggle":"collapse",onClick:this._toggleDoneDisplay},"Done (",this.state.segments.filter(function(e){return"DONE"==e.state}).length,")"),"  ",m.createElement("span",{className:"glyphicon glyphicon-menu-down","aria-hidden":"true",style:E}),m.createElement("span",{className:"glyphicon glyphicon-menu-up","aria-hidden":"true",style:f})),S=m.createElement("div",{className:"panel-title"},m.createElement("a",{href:"#segments-notstarted","data-toggle":"collapse",onClick:this._toggleNotStartedDisplay},"Not started (",this.state.segments.filter(function(e){return"NOT_STARTED"==e.state}).length,")"),"  ",m.createElement("span",{className:"glyphicon glyphicon-menu-down","aria-hidden":"true",style:y}),m.createElement("span",{className:"glyphicon glyphicon-menu-up","aria-hidden":"true",style:v}));return m.createElement("div",null,m.createElement("div",{className:"panel panel-primary"},m.createElement("div",{className:"panel-heading"},N),m.createElement("div",{className:"panel-body collapse in",id:"segments-running"},c)),m.createElement("div",{className:"panel panel-success"},m.createElement("div",{className:"panel-heading"},b),m.createElement("div",{className:"panel-body collapse in",id:"segments-done"},d)),m.createElement("div",{className:"panel panel-info"},m.createElement("div",{className:"panel-heading"},S),m.createElement("div",{className:"panel-body collapse in",id:"segments-notstarted"},u)))}}),g=m.createClass({displayName:"Segment",propTypes:{segment:m.PropTypes.object.isRequired,refreshSegments:m.PropTypes.func},getInitialState:function(){return{segment:{}}},_abortSegment:function(){console.log("Aborting segment "+this.props.segment.id),p.ajax({url:this.props.urlPrefix+"/repair_run/"+encodeURIComponent(this.props.segment.runId)+"/segments/abort/"+encodeURIComponent(this.props.segment.id),method:"GET",component:this,complete:function(e){this.component.props.refreshSegments()}})},render:function(){var e=this;return"NOT_STARTED"==this.props.segment.state?m.createElement("tr",null,m.createElement("td",null,this.props.segment.id),m.createElement("td",null,this.props.segment.tokenRange.start),m.createElement("td",null,this.props.segment.tokenRange.end),m.createElement("td",null,this.props.segment.failCount),m.createElement("td",null,m.createElement(u,{bsStyle:"primary"},this.props.segment.state))):"RUNNING"==this.props.segment.state?m.createElement("tr",null,m.createElement("td",null,this.props.segment.id),m.createElement("td",null,this.props.segment.tokenRange.start),m.createElement("td",null,this.props.segment.tokenRange.end),m.createElement("td",null,this.props.segment.failCount),m.createElement("td",null,m.createElement(u,{bsStyle:"warning"},this.props.segment.state)),m.createElement("td",null,this.props.segment.coordinatorHost),m.createElement("td",null,this.props.segment.startTime),m.createElement("td",null,m.createElement(u,{bsStyle:"danger",onClick:function(){return e._abortSegment()}},"Abort"))):m.createElement("tr",null,m.createElement("td",null,this.props.segment.id),m.createElement("td",null,this.props.segment.tokenRange.start),m.createElement("td",null,this.props.segment.tokenRange.end),m.createElement("td",null,this.props.segment.failCount),m.createElement("td",null,m.createElement(u,{bsStyle:"success"},this.props.segment.state)),m.createElement("td",null,this.props.segment.coordinatorHost),m.createElement("td",null,d(this.props.segment.startTime).format("LLL")),m.createElement("td",null,d(this.props.segment.endTime).format("LLL")),m.createElement("td",null,d.duration(d(this.props.segment.endTime).diff(d(this.props.segment.startTime))).humanize()),m.createElement("td",null,m.createElement(u,{bsStyle:"danger",onClick:function(){return e._abortSegment()}},"Replay")))}});t.exports=h}.apply(t,a),!(void 0!==l&&(e.exports=l))}).call(this)}finally{!function(){var t=e.hot.data&&e.hot.data.foundReactClasses||!1;if(e.exports&&e.makeHot){var a=n(15);a(e,n(1))&&(t=!0);var l=t;l&&e.hot.accept(function(e){e&&console.error("Cannot apply hot update to segment-list.jsx: "+e.message)})}e.hot.dispose(function(n){n.makeHot=e.makeHot,n.foundReactClasses=t})}()}}).call(t,n(6)(e))},794:function(e,t,n){var a,l;(function(e){!function(){var t=n(13),a=n(14),l=n(4),s=n(1);e.makeHot=e.hot.data?e.hot.data.makeHot:t(function(){return a.getRootInstances(l)},s)}();try{(function(){a=[t,n(11),n(12),n(24),n(1),n(91),n(393),n(182)],l=function(e,t,n,a,l,s,r,o){"use strict";var i=n.default,c=i(t),m=i(a),d=i(l),u=(i(s),i(r));o.statusObservableTimer,o.addClusterSubject,o.addClusterResult,o.deleteClusterSubject,o.deleteClusterResult,o.clusterNames;c(document).ready(function(e){e.urlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null!=t?t[1]||0:null};var t=e.urlParam("repairRunId");t||(t="0"),m.render(d.createElement(u,{repairRunId:t}),document.getElementById("wrapper"))})}.apply(t,a),!(void 0!==l&&(e.exports=l))}).call(this)}finally{!function(){var t=e.hot.data&&e.hot.data.foundReactClasses||!1;if(e.exports&&e.makeHot){var a=n(15);a(e,n(1))&&(t=!0);var l=t;l&&e.hot.accept(function(e){e&&console.error("Cannot apply hot update to segments.js: "+e.message)})}e.hot.dispose(function(n){n.makeHot=e.makeHot,n.foundReactClasses=t})}()}}).call(t,n(6)(e))}});